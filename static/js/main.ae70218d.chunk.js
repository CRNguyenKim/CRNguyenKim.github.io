(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(27),s=a.n(r),i=(a(76),a(77),a(9)),c=a(10),l=a(12),u=a(11),d=a(13),p=a(35),m=a(24),h=a(6),g=a(122),f=a(119),y=a(63),b=a(121),E=a(17),v=a(21),O=a(28),k=a.n(O),S="#303444",x="#80deea",j=["#af4448","#ff8a65","#ffd54f","#aed581","#00bfa5"],C=a(123),w=a(120),D=a(30),T=a(16),A=function(t,e){switch(e){case"hour":return t.map(function(t){var e=new Date(t);return e.getHours(),e.getHours()+":00"});case"day":return t.map(function(t){var e=new Date(t);return"".concat(e.getDate(),"/").concat(e.getMonth())});case"month":return t.map(function(t){var e=new Date(t);return"".concat((e.getMonth()+1)%12===0?12:(e.getMonth()+1)%12,"/").concat(e.getFullYear())})}},I={responsive:{display:"flex",alignItems:"center"},rowOption:{margin:"10px 0px 10px 0px"},selected:{color:"#ffffff"}},R={DURATIONS:T.b,TIMER:T.j,LIMITS:T.f,VIEWS:T.c,LOCATIONS:T.g};function _(t){return t.charAt(0).toUpperCase()+t.slice(1)}var M=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return this.props.data.length?this.props.dropdown?o.a.createElement(C.a.Group,{controlId:"exampleForm.ControlSelect1"},o.a.createElement(y.a,{xs:3,md:3,xl:3,sm:3,lg:3,style:{color:x}},o.a.createElement("p",{style:{margin:0,whiteSpace:"nowrap"}}," ",o.a.createElement(D.a,{icon:R[this.props.name.toUpperCase()]})," ",_(this.props.name),"  ")),o.a.createElement(C.a.Control,{as:"select",onChange:function(e){t.props.onOptionChange(t.props.name,e.target.value)},style:{backgroundColor:S,color:"#ffffff"}},this.props.data.map(function(t){return o.a.createElement("option",{key:t},t)}))):o.a.createElement(f.a,{style:Object(h.a)({},I.responsive,I.rowOption)},o.a.createElement(y.a,{xs:3,md:3,xl:3,sm:3,lg:3,style:{color:x}},o.a.createElement("p",{style:{whiteSpace:"nowrap",verticalAlign:"middle"}},o.a.createElement("span",{style:{margin:0,fontSize:"2vh"}},"  ",o.a.createElement(D.a,{icon:R[this.props.name.toUpperCase()]})," ",_(this.props.name)," "))),o.a.createElement(y.a,{xs:8,md:8,xl:8,sm:8,lg:8,style:Object(h.a)({},I.responsive,{justifyContent:"center"})},o.a.createElement(w.a,{"aria-label":"Basic example"},this.props.data&&this.props.data.map(function(e){return o.a.createElement(b.a,{size:"sm",variant:"outline-info",key:e,style:t.props.selections[t.props.name]===e?I.selected:null,onClick:function(){return t.props.onOptionChange(t.props.name,e)}},e)})))):""}}]),e}(n.Component),L=function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(o)))).onOptionChange=function(t,e){a.props.onOptionChange(t,e)},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props.dropdown?this.props.dropdown:[];return o.a.createElement(g.a,{fluid:!0},o.a.createElement(f.a,null,o.a.createElement(y.a,{xs:12,sm:12,md:12,xl:8,lg:8},Object.keys(this.props.options).map(function(a){return o.a.createElement(M,{name:a,data:t.props.options[a],key:a,onOptionChange:t.onOptionChange,selections:t.props.selections,dropdown:e.includes(a)})})),o.a.createElement(y.a,{xs:12,sm:12,md:12,xl:4,lg:4},o.a.createElement(f.a,{style:Object(h.a)({},I.responsive,I.rowOption)},o.a.createElement(y.a,{xs:3,md:3,xl:3,sm:3,lg:3,style:Object(h.a)({color:x},I.responsive)},o.a.createElement("p",{style:{margin:0}}," ",o.a.createElement(D.a,{icon:T.k}),"  ")),o.a.createElement(y.a,{xs:9,md:9,xl:9,sm:9,lg:9,style:Object(h.a)({color:x},I.responsive,{justifyContent:"center"})},o.a.createElement("p",{style:{margin:0}},function(t){t=Number(t);var e=Math.floor(t/3600),a=Math.floor(t%3600/60),n=Math.floor(t%3600%60);return("0"+e).slice(-2)+":"+("0"+a).slice(-2)+":"+("0"+n).slice(-2)}(this.props.countdown)))))))}}]),e}(n.Component),U=a(124),G="SET_MODES",B="SET_DURATIONS",z="SET_LIMITS",N="SET_TIMER",H="SET_VIEWS",W="SET_CATEGORIES",Y="SET_LOCATIONS",F="SET_COUNTDOWN",P="SET_DATA",K="SET_SERIES",V="APPEND_SERIES",X="NODATA",J="UNAUTHORIZED",Q=a(8),Z=a.n(Q),$={modes:"",durations:"",limits:"",views:"",timer:"",series:[],data:[],labels:[],locations:[]};function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t+G:return Object(h.a)({},e,{modes:a.payload.modes});case t+B:return Object(h.a)({},e,{durations:a.payload.durations});case t+z:return Object(h.a)({},e,{limits:a.payload.limits});case t+H:return Object(h.a)({},e,{views:a.payload.views});case t+N:return Object(h.a)({},e,{timer:a.payload.timer});case t+P:return Object(h.a)({},e,{data:a.payload.data});case t+W:return Object(h.a)({},e,{categories:a.payload.categories});case t+K:return Object(h.a)({},e,{series:a.payload.series});case t+V:return Object(h.a)({},e,{series:e.series.concat(a.payload.data)});case t+Y:return Object(h.a)({},e,{locations:a.payload.locations});case t+F:return Object(h.a)({},e,{countdown:a.payload.countdown});default:return e}}}var tt={token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,user:null},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"USER_LOADING":return Object(h.a)({},t,{isLoading:!0});case"USER_LOAD":return Object(h.a)({},t,{isLoading:!1,user:e.payload.username});case"LOGIN_SUCCESS":return localStorage.setItem("token",e.payload.token),Object(h.a)({},t,{token:e.payload.token,isLoading:!1,user:e.payload.username});case"LOGIN_FAILED":case"USER_LOGOUT":return localStorage.removeItem("token"),Object(h.a)({},t,{token:null,user:null,isAuthenticated:!1,isLoading:!1});case"ADMIN_LOADED":return Object(h.a)({},t,{isAuthenticated:!0});default:return t}},at=a(18),nt="Authentication Error !",ot="Server error!",rt={success:{},error:{}},st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_ERROR":return Object(h.a)({},t,{error:e.payload});case"GET_SUCCESS":return Object(h.a)({},t,{success:e.payload});case"CLEAR_MESSAGES":return{error:{},success:{}};default:return t}},it=a(29),ct=a(64),lt=Object(it.c)({generalDashboard:q("generalChart"),circleDashboard:q("circleChart"),columnDashboard:q("columnChart"),auth:et,messages:st}),ut=Object(it.d)(lt,{},Object(it.a)(ct.a)),dt=function(t,e,a){return{type:"".concat(a,"SET_").concat(t.toUpperCase()),payload:Object(at.a)({},t,e)}},pt=function(t,e){return{type:e+P,payload:{data:t}}},mt=function(t,e){return{type:e+K,payload:{series:t}}},ht=function(t,e){return{type:e+V,payload:{data:t}}},gt=function(t,e){return{type:e+F,payload:{countdown:t}}},ft="day",yt="/api/dashboard",bt=function(t,e){return t.map(function(t){return t[e]})},Et=function(t,e,a){return{data:t,name:e,type:a}},vt="circleChart";Z.a.defaults.baseURL="https://nk-asp.herokuapp.com";var Ot=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).getLocations=function(){var t="all";Z.a.get("".concat(yt,"/location?"),{params:{},headers:{Authorization:"Bearer ".concat(ut.getState().auth.token)}}).then(function(t){return t.data.data}).then(function(e){a.props.options.locations=[t].concat(bt(e,"location"))})},a.updateCountdown=function(){0===a._tickCountdown?(a.update(),a.resetTimer()):a._tickCountdown-=1,ut.dispatch(gt(a._tickCountdown,vt))},a.resetTimer=function(){a.state._updateInterval&&clearInterval(a.state._updateInterval),a._tickCountdown=ut.getState().circleDashboard.timer;var t=setInterval(a.updateCountdown,1e3);a.setState({_updateInterval:t})},a.update=function(){var t=[],e=ut.getState().circleDashboard.durations?ut.getState().circleDashboard.durations:a.props.options.durations[0],n=ut.getState().circleDashboard.locations?ut.getState().circleDashboard.locations:a.props.options.locations[0];"all"===n&&(n=""),Z.a.all([1,2,3,4,5].map(function(o){return a.updateDataByType(o,e,t,n)}))},a.optionChange=function(t,e){ut.dispatch(dt(t,e,vt)),a.update(),a.resetTimer()},a.state={_updateInterval:null,dataError:"",data:[],options:{labels:["R\u1ea5t kh\xf4ng t\u1ed1t","Kh\xf4ng t\u1ed1t","B\xecnh th\u01b0\u1eddng","T\u1ed1t","R\u1ea5t t\u1ed1t"],chart:{id:vt,width:"60%",foreColor:x,fontFamily:"Helvetica, Arial, sans-serif",fontSize:800,toolbar:{show:!0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0}}},colors:j,fill:{opacity:.9},title:{text:"Customer Rating Percentage",align:"left"},stroke:{colors:["transparent"]},theme:{palette:"palette1"},plotOptions:{pie:{customScale:1,offsetX:0,offsetY:0,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"55%",background:"transparent"}}},tooltip:{enabled:!0}}},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this._tickCountdown=10,this.getLocations(),Object.keys(this.props.options).map(function(e){return ut.dispatch(dt(e,t.props.options[e][0],vt))}),this.update(),this.resetTimer()}},{key:"updateDataByType",value:function(t,e,a,n){var o=this;Z.a.get("".concat(yt,"/").concat("total","?"),{params:{rated:t,duration:e,limit:1,location:n},headers:{Authorization:"Bearer ".concat(this.props.auth.token)}}).then(function(t){return t.data.data}).then(function(e){var n=bt(e,"total")[0];a.push({data:n,name:t}),5===a.length&&(a.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}),ut.dispatch(pt(bt(a,"data"),vt)),0===Math.max.apply(Math,Object(v.a)(a.map(function(t){return t.data})))?o.setState({dataError:X}):o.setState({dataError:""}))}).catch(function(t){t.response&&403===t.response.status&&o.setState({dataError:J})})}},{key:"componentWillUnmount",value:function(){this.state._updateInterval&&clearInterval(this.state._updateInterval)}},{key:"render",value:function(t){return o.a.createElement("div",{style:{borderRadius:0,marginTop:10,display:"flex",flexDirection:"column",background:S,minHeight:"10vh",height:this.state.dataError===X?"auto":"85vh"}},o.a.createElement(L,{options:this.props.options,selections:this.props.optionsState,onOptionChange:this.optionChange,dropdown:["locations"],countdown:this._tickCountdown}),this.state.dataError===J?o.a.createElement(U.a,{variant:"danger"},"Couldn't retrieve data from sever. Make sure your account is admin account!"):this.state.dataError===X?o.a.createElement(U.a,{variant:"secondary"}," ",o.a.createElement("h2",null,"Data is empty!")):o.a.createElement(k.a,{options:this.state.options,series:this.props.optionsState.data,type:"donut"}))}}]),e}(n.Component);Ot.defaultProps={options:{durations:["day","month"],timer:[10,60,3600],locations:[]},series:[]};var kt=Object(E.b)(function(t){return{optionsState:t.circleDashboard,auth:t.auth}})(Ot),St=a(22);Z.a.defaults.baseURL="https://nk-asp.herokuapp.com";var xt,jt="generalChart",Ct=2,wt=10,Dt={modes:[],durations:["hour","day","month"],limits:[7,12,24],timer:[10,60,3600],views:["area","line"],categories:[]},Tt=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).resetSeries=function(){St.a.exec(jt,"resetSeries")},a.updateDataByType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Z.a.get("".concat(yt,"/avg?"),{params:{rated:e,duration:n,limit:o},headers:{Authorization:"Bearer ".concat(a.props.auth.token)}}).then(function(t){return t.data.data}).then(function(e){var o=bt(e,"average"),r=bt(e,ft),s=A(r,n),i=Et(o,"rating AVG",ut.getState().generalDashboard.views);ut.dispatch(ht(i,jt));try{St.a.exec(jt,"updateOptions",{xaxis:{categories:s}}),"avg"===t&&St.a.exec(jt,"updateOptions",{yaxis:{min:0,tickAmount:5,max:5}})}catch(c){}ut.dispatch(pt([i],jt)),0===Math.max.apply(Math,Object(v.a)(o))?a.setState({dataError:X}):a.setState({dataError:""})}).catch(function(t){t.response&&403===t.response.status&&a.setState({dataError:J})})},a.updateCountdown=function(){0===wt?(a.update(),a.resetTimer()):wt-=1,ut.dispatch(gt(wt,jt))},a.resetTimer=function(){xt&&clearInterval(xt),wt=ut.getState().generalDashboard.timer,xt=setInterval(a.updateCountdown,1e3)},a.update=function(){a.updateDataByType(ut.getState().generalDashboard.modes,1,ut.getState().generalDashboard.durations,ut.getState().generalDashboard.limits)},a.optionChange=function(t,e){ut.dispatch(dt(t,e,jt)),a.update(),a.resetTimer()},a.state={dataError:"",countdown:"",series:[],optionsMixedChart:{chart:{width:"100%",background:S,id:jt},title:{text:"Average customer rating over time",align:"center"},colors:[x],stroke:{width:Ct,opacity:1,curve:"smooth"},markers:{size:0,strokeWidth:1,strokeOpacity:1,hover:{size:4}},yaxis:{tickAmount:5,min:0,max:5},grid:{borderColor:"#40475D"},theme:{mode:"dark"},legend:{offsetX:0,offsetY:-20,height:30,markers:{width:20,height:10,radius:12}},fill:{opacity:.7}}},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(t){Object.keys(Dt).map(function(t){return ut.dispatch(dt(t,Dt[t][0],jt))}),this.updateDataByType(Dt.modes[0],1,Dt.durations[0],Dt.limits[0]),this.resetTimer()}},{key:"componentWillUnmount",value:function(){xt&&clearInterval(xt)}},{key:"render",value:function(t){return o.a.createElement("div",{style:{borderRadius:0,marginTop:10,display:"flex",flexDirection:"column",background:S,minHeight:"10vh",transition:"0.5s",height:(this.state.dataError,"auto")}},o.a.createElement(L,{onOptionChange:this.optionChange,options:Dt,selections:this.props.options,countdown:this.props.options.countdown}),this.state.dataError===J?o.a.createElement(U.a,{variant:"danger"},"Couldn't retrieve data from sever. Make sure your account is admin account!"):this.state.dataError===X?o.a.createElement(U.a,{variant:"secondary"},o.a.createElement("h2",null,"Data is empty!")):o.a.createElement(k.a,{options:this.state.optionsMixedChart,series:this.props.options.data,type:"line"}))}}]),e}(n.Component),At=Object(E.b)(function(t){return{options:t.generalDashboard,auth:t.auth}})(Tt);Z.a.defaults.baseURL="https://nk-asp.herokuapp.com";var It,Rt="columnChart",_t=2,Mt=10,Lt={durations:["hour","day","month"],limits:[7,12,24],timer:[10,60,3600],views:["column","area","line"]},Ut=["R\u1ea5t kh\xf4ng t\u1ed1t","Kh\xf4ng t\u1ed1t","B\xecnh th\u01b0\u1eddng","T\u1ed1t","R\u1ea5t t\u1ed1t"],Gt=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).getLocations=function(){var t="all";Z.a.get("".concat(yt,"/location?"),{params:{},headers:{Authorization:"Bearer ".concat(a.props.auth.token)}}).then(function(t){return t.data.data}).then(function(e){Lt.locations=[t].concat(bt(e,"location"))}).catch(function(t){401===t.response.status&&a.setState({dataError:J})})},a.updateDataByType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s={avg:"average",total:"total"};Z.a.get("".concat(yt,"/").concat(t,"?"),{params:{rated:e,duration:n,limit:o,location:r},headers:{Authorization:"Bearer ".concat(a.props.auth.token)}}).then(function(t){return t.data.data}).then(function(o){var r=bt(o,s[t]),i=bt(o,ft),c=A(i,n),l=Et(r,"".concat(e,".  ").concat(Ut[e-1]),ut.getState().columnDashboard.views);ut.dispatch(ht(l,Rt));try{St.a.exec(Rt,"updateOptions",{xaxis:{categories:c}}),"avg"===t?St.a.exec(Rt,"updateOptions",{yaxis:{min:0,tickAmount:5,max:5}}):5===a.props.options.series.length&&St.a.exec(Rt,"updateOptions",{yaxis:{min:0,tickAmount:5,max:Math.max.apply(Math,Object(v.a)(a.props.options.series.map(function(t){return Math.max.apply(Math,Object(v.a)(t.data))})))}})}catch(d){}if(5===a.props.options.series.length){var u=a.props.options.series.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0});St.a.exec(Rt,"updateSeries",u),a.setState({series:u}),0===Math.max.apply(Math,Object(v.a)(u.map(function(t){return Math.max.apply(Math,Object(v.a)(t.data))})))?a.setState({dataError:X}):a.setState({dataError:""})}}).catch(function(t){t.response&&403===t.response.status&&a.setState({dataError:J})})},a.updateCountdown=function(){0===Mt?(a.update(),a.resetTimer()):Mt-=1,ut.dispatch(gt(Mt,Rt))},a.resetTimer=function(){It&&clearInterval(It),Mt=ut.getState().columnDashboard.timer,It=setInterval(a.updateCountdown,1e3)},a.update=function(){var t="total";Z.a.all([1,2,3,4,5].map(function(e){return a.updateDataByType(t,e,ut.getState().columnDashboard.durations,ut.getState().columnDashboard.limits,"all"===ut.getState().columnDashboard.locations?"":ut.getState().columnDashboard.locations)})).then(function(t){return ut.dispatch(mt([],Rt))})},a.optionChange=function(t,e){ut.dispatch(dt(t,e,Rt)),a.update(),a.resetTimer()},a.state={dataError:"",locations:[],series:[],optionsMixedChart:{chart:{width:"100%",background:S,id:Rt},title:{text:"Total customer rating over time",align:"center"},colors:j,stroke:{width:_t,opacity:1,curve:"smooth"},markers:{size:0,strokeWidth:1,strokeOpacity:1,hover:{size:4}},yaxis:{tickAmount:5,min:0,max:5},grid:{borderColor:"#40475D",xaxis:{lines:{show:!0}}},theme:{mode:"dark"},legend:{offsetX:0,offsetY:-10,height:50,markers:{width:25,height:20,radius:5}},fill:{opacity:.7},dataLabels:{enabled:!1}}},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(t){this.getLocations(),Object.keys(Lt).map(function(t){return ut.dispatch(dt(t,Lt[t][0],Rt))}),ut.dispatch(dt("durations",Lt.durations[0],Rt)),this.update(),this.resetTimer()}},{key:"componentWillUnmount",value:function(){It&&clearInterval(It)}},{key:"render",value:function(t){return o.a.createElement("div",{style:{borderRadius:0,marginTop:10,display:"flex",flexDirection:"column",background:S,minHeight:"10vh"}},o.a.createElement(L,{onOptionChange:this.optionChange,options:Lt,selections:this.props.options,dropdown:["locations"],countdown:this.props.options.countdown}),this.state.dataError===J?o.a.createElement(U.a,{variant:"danger"},"Couldn't retrieve data from sever. Make sure your account is admin account!"):this.state.dataError===X?o.a.createElement(U.a,{variant:"secondary"},o.a.createElement("h2",null,"Data is empty!")):o.a.createElement(k.a,{options:this.state.optionsMixedChart,series:this.state.series,type:"bar"}))}}]),e}(n.Component),Bt=Object(E.b)(function(t){return{options:t.columnDashboard,auth:t.auth}})(Gt),zt=a(125);Z.a.defaults.baseURL="https://nk-asp.herokuapp.com";var Nt,Ht={container:{overflowY:"scroll",maxHeight:"20rem",backgroundColor:S,color:"#aaaaaa"}},Wt=20,Yt=[T.a,T.d,T.h,T.i,T.e],Ft=["R\u1ea5t kh\xf4ng t\u1ed1t","Kh\xf4ng t\u1ed1t","B\xecnh th\u01b0\u1eddng","T\u1ed1t","R\u1ea5t t\u1ed1t"],Pt=function(t){var e=new Date(t.date);return o.a.createElement("p",null," ",e.toLocaleString()," ",o.a.createElement(D.a,{style:{color:j[t.rated-1]},icon:Yt[t.rated-1]}),o.a.createElement("span",{style:{color:j[t.rated-1]}}," (",Ft[t.rated-1]," ) ",t.feedback," "))},Kt=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).update=function(){Z.a.get("api/dashboard/comment?",{params:{limit:Wt},headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(t){return t.data.data}).then(function(t){a.setState({comments:t}),0===t.length?a.setState({dataError:X}):a.setState({dataError:""})}).catch(function(t){t.response&&403===t.response.status&&a.setState({dataError:J})})},a.state={dataError:"",comments:[]},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.update(),Nt=setInterval(this.update,2e3)}},{key:"componentWillUnmount",value:function(){Nt&&clearInterval(Nt)}},{key:"render",value:function(){return o.a.createElement(g.a,null,o.a.createElement(f.a,null,o.a.createElement("div",{style:{position:"sticky",top:0,background:S,width:"90%",height:"10%",color:x}},o.a.createElement("h3",null," Recent comments "))),o.a.createElement(f.a,{style:Object(h.a)({},Ht.container,{maxHeight:"30vw"})},this.state.dataError===J&&o.a.createElement(U.a,{variant:"danger"},"Couldn't retrieve data from sever. Make sure your account is admin account!"),this.state.dataError===X?o.a.createElement(U.a,{variant:"secondary",style:{width:"100%"}},o.a.createElement("h2",null,"Data is empty!")):o.a.createElement(zt.a,{variant:"flush"},this.state.comments.map(function(t,e){return o.a.createElement(Pt,{date:t.created_at,rated:t.rated,feedback:t.comment,key:e})}))))}}]),e}(n.Component);Z.a.defaults.baseURL="https://nk-asp.herokuapp.com";var Vt=function(t){return function(e,a){e({type:"USER_LOADING"});var n=t||a().auth.token;Z.a.get("/api/auth/admin",{params:{},headers:{"Content-Type":"aplication/json",Authorization:"Bearer ".concat(n)}}).then(function(t){e({type:"ADMIN_LOADED",payload:t.data})}).catch(function(t){t.response?403===t.response.status&&(e({type:"GET_ERROR",payload:Object(at.a)({},nt,"Account is not authorized")}),e({type:"USER_LOGOUT"})):e({type:"GET_ERROR",payload:Object(at.a)({},ot,"Sever is not responding!")})})}};Z.a.defaults.baseURL="https://nk-asp.herokuapp.com";var Xt={responsive:{display:"flex",justifyContent:"center",alignItems:"center"},brand:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:100,color:"#aaaaaa",fontFamily:"Quantico",background:S,margin:5,borderRadius:10},btn:{background:S,margin:10,borderRadius:10,minHeight:100,display:"flex",justifyContent:"center",alignItems:"center"}},Jt=Object(E.b)(function(t){return{isAuthenticated:t.auth.isAuthenticated}})(function(t){return t.isAuthenticated?o.a.createElement(g.a,{fluid:!0,style:{backgroundColor:"#202534"}},o.a.createElement(f.a,{style:Xt.responsive},o.a.createElement(y.a,{xs:9,md:9,xl:9,sm:9,lg:9,style:Xt.brand},o.a.createElement("h2",{style:{fontSize:"3vw",color:x}},"NGUYEN KIM RATING DASHBOARD")),o.a.createElement(y.a,{xs:2,md:2,xl:2,sm:2,lg:2,style:Xt.btn},o.a.createElement(b.a,{variant:"outline-info",onClick:function(){return ut.dispatch(function(t,e){t({type:"USER_LOGOUT"})})}},"Logout"))),o.a.createElement(f.a,{style:Object(h.a)({},Xt.responsive)},o.a.createElement(y.a,{xs:11,md:11,xl:5,sm:11,lg:5,style:{border:"1px solid ".concat(S),background:S,borderRadius:10,margin:10}},o.a.createElement(kt,null)),o.a.createElement(y.a,{xs:11,md:11,xl:5,sm:11,lg:5,style:{border:"1px solid ".concat(S),background:S,borderRadius:10,margin:10}},o.a.createElement(At,null)),o.a.createElement(y.a,{xs:11,md:11,xl:10,sm:11,lg:10,style:{border:"1px solid ".concat(S),background:S,borderRadius:10,margin:10}},o.a.createElement(Bt,null)),o.a.createElement(y.a,{xs:11,md:11,xl:10,sm:11,lg:10,style:{border:"1px solid ".concat(S),background:S,borderRadius:10,margin:10}},o.a.createElement(Kt,null)))):o.a.createElement(m.a,{to:"/login"})}),Qt=function(t){return t.display&&o.a.createElement(U.a,{variant:"danger",show:!0,dismissible:!0,onClose:t.onClose},o.a.createElement(U.a.Heading,null,t.heading),o.a.createElement("p",null,t.text))},Zt={responsive:{display:"flex",justifyContent:"center",alignItems:"center"},brand:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:80,color:"#aaaaaa",fontFamily:"Quantico",background:S,margin:"10px 20% 10px 20%"},text:{color:"#dddddd"}},$t=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).state={username:"",password:""},t}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(t){var e=this;return this.props.isAuthenticated?o.a.createElement(m.a,{to:"/"}):o.a.createElement(g.a,null,o.a.createElement(f.a,{style:Zt.responsive},o.a.createElement(y.a,{xs:10,sm:10,md:12,lg:8,xl:8,style:Object(h.a)({},Zt.brand)},o.a.createElement("h5",{style:{fontSize:"3vw",color:x,whiteSpace:"nowrap"}},"NGUYENKIM RATING DASHBOARD"))),o.a.createElement(f.a,{style:Zt.responsive},o.a.createElement(y.a,{xs:10,sm:10,md:12,lg:8,xl:8,style:{background:S,padding:"5%"}},o.a.createElement(Qt,{display:nt in this.props.messages.error,onClose:function(){ut.dispatch({type:"CLEAR_MESSAGES",payload:{}})},heading:nt,text:this.props.messages.error?this.props.messages.error[nt]:{}}),o.a.createElement(Qt,{display:ot in this.props.messages.error,onClose:function(){ut.dispatch({type:"CLEAR_MESSAGES",payload:{}})},heading:ot,text:this.props.messages.error?this.props.messages.error[ot]:{}}),o.a.createElement(C.a,{fullWidth:!0},o.a.createElement("h1",{style:{color:"#dddddd"}},"Login"),o.a.createElement(C.a.Group,{controlId:"formBasicEmail",lg:!0},o.a.createElement(C.a.Label,{style:Zt.text},"Username"),o.a.createElement(C.a.Control,{type:"text",placeholder:"admin",size:"lg",style:{backgroundColor:S,color:"#ffffff"},value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})}})),o.a.createElement(C.a.Group,{controlId:"formBasicPassword",lg:!0},o.a.createElement(C.a.Label,{style:Zt.text},"Password"),o.a.createElement(C.a.Control,{type:"password",placeholder:"password",size:"lg",style:{backgroundColor:S,color:"#ffffff"},value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})}})),o.a.createElement(b.a,{variant:"info",type:"button",onClick:function(){return ut.dispatch((t=e.state.username,a=e.state.password,function(e){Z.a.post("api/auth/login",{username:t,password:a}).then(function(t){e({type:"LOGIN_SUCCESS",payload:t.data})}).catch(function(t){t.response?400===t.response.status&&e({type:"GET_ERROR",payload:Object(at.a)({},nt,"Invalid login or password")}):e({type:"GET_ERROR",payload:Object(at.a)({},ot,"Sever is not responding!")})}).then(function(t){return e(Vt())})}));var t,a}},"Submit")))))}}]),e}(n.Component),qt=Object(E.b)(function(t){return{isAuthenticated:t.auth.isAuthenticated,messages:t.messages}})($t),te=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){ut.dispatch(Vt())}},{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement(m.d,null,o.a.createElement(m.b,{path:"/login",component:qt}),o.a.createElement(m.b,{exact:!0,path:"/",component:Jt})))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(E.a,{store:ut},o.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},71:function(t,e,a){t.exports=a(117)},77:function(t,e,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.ae70218d.chunk.js.map